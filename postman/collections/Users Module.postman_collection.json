{
	"info": {
		"_postman_id": "users-module-complete-collection",
		"name": "Users Module - Complete Tests",
		"description": "Tests complets pour TOUS les cas de figures du module users",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "ğŸ”“ ROUTES PUBLIQUES",
			"item": [
				{
					"name": "ğŸ” Authentification - SuccÃ¨s",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"email\": \"{{validTestEmail}}\", \"password\": \"{{validTestPassword}}\"}"},
						"url": {"raw": "{{baseUrl}}/api/users/authenticate", "host": ["{{baseUrl}}"], "path": ["api", "users", "authenticate"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âœ… Authentification rÃ©ussie\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('id');pm.expect(jsonData.data).to.not.have.property('password_hash');pm.globals.set('authToken',jsonData.data.token||'test-token');pm.globals.set('testUserId',jsonData.data.id);console.log('âœ… Token gÃ©nÃ©rÃ©:',jsonData.data.id);}});"]}}]
				},
				{
					"name": "âŒ Authentification - Email invalide",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"email\": \"email-invalide\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users/authenticate", "host": ["{{baseUrl}}"], "path": ["api", "users", "authenticate"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur email invalide\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;console.log('âŒ Email invalide dÃ©tectÃ©');}});"]}}]
				},
				{
					"name": "âŒ Authentification - Mot de passe incorrect",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"email\": \"{{validTestEmail}}\", \"password\": \"wrongpassword\"}"},
						"url": {"raw": "{{baseUrl}}/api/users/authenticate", "host": ["{{baseUrl}}"], "path": ["api", "users", "authenticate"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Mot de passe incorrect\", function(){if(pm.response.code===401){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;pm.expect(jsonData.code).to.equal('AUTHENTICATION_FAILED');console.log('âŒ Mot de passe incorrect');}});"]}}]
				},
				{
					"name": "âŒ Authentification - Compte inexistant",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"email\": \"nonexistent@example.com\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users/authenticate", "host": ["{{baseUrl}}"], "path": ["api", "users", "authenticate"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Compte inexistant\", function(){if(pm.response.code===401){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;console.log('âŒ Compte inexistant');}});"]}}]
				},
				{
					"name": "ğŸ“§ VÃ©rifier disponibilitÃ© email - Disponible",
					"request": {
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/api/users/check/email/{{availableEmail}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "check", "email", "{{availableEmail}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“§ Email disponible\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.available).to.be.true;console.log('ğŸ“§ Email disponible');}});"]}}]
				},
				{
					"name": "ğŸ“§ VÃ©rifier disponibilitÃ© email - Non disponible",
					"request": {
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/api/users/check/email/{{existingEmail}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "check", "email", "{{existingEmail}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“§ Email non disponible\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.available).to.be.false;console.log('ğŸ“§ Email dÃ©jÃ  utilisÃ©');}});"]}}]
				},
				{
					"name": "ğŸ‘¤ VÃ©rifier disponibilitÃ© username - Disponible",
					"request": {
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/api/users/check/username/{{availableUsername}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "check", "username", "{{availableUsername}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ‘¤ Username disponible\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.available).to.be.true;console.log('ğŸ‘¤ Username disponible');}});"]}}]
				},
				{
					"name": "ğŸ‘¤ VÃ©rifier disponibilitÃ© username - Non disponible",
					"request": {
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/api/users/check/username/{{existingUsername}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "check", "username", "{{existingUsername}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ‘¤ Username non disponible\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.available).to.be.false;console.log('ğŸ‘¤ Username dÃ©jÃ  utilisÃ©');}});"]}}]
				}
			]
		},
		{
			"name": "ğŸ”’ ROUTES PROTÃ‰GÃ‰ES",
			"item": [
				{
					"name": "ğŸ“‹ Lister utilisateurs - SuccÃ¨s",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users?page=1&limit=10", "host": ["{{baseUrl}}"], "path": ["api", "users"], "query": [{"key": "page", "value": "1"}, {"key": "limit", "value": "10"}]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“‹ Liste rÃ©cupÃ©rÃ©e avec succÃ¨s\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.be.an('array');pm.expect(jsonData.meta.pagination).to.exist;console.log('ğŸ“‹ Liste rÃ©cupÃ©rÃ©e:',jsonData.data.length);}});"]}}]
				},
				{
					"name": "ğŸ“‹ Lister utilisateurs - Avec recherche",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users?search=test&status=active&role=user", "host": ["{{baseUrl}}"], "path": ["api", "users"], "query": [{"key": "search", "value": "test"}, {"key": "status", "value": "active"}, {"key": "role", "value": "user"}]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“‹ Recherche rÃ©ussie\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;console.log('ğŸ“‹ Recherche avec filtres rÃ©ussie');}});"]}}]
				},
				{
					"name": "ğŸ“Š Statistiques utilisateurs",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/stats", "host": ["{{baseUrl}}"], "path": ["api", "users", "stats"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“Š Statistiques rÃ©cupÃ©rÃ©es\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('total');pm.expect(jsonData.data).to.have.property('active');console.log('ğŸ“Š Statistiques:',jsonData.data);}});"]}}]
				},
				{
					"name": "ğŸ‘¤ DÃ©tails utilisateur - SuccÃ¨s",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/{{testUserId}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "{{testUserId}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ‘¤ DÃ©tails rÃ©cupÃ©rÃ©s\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('id');pm.expect(jsonData.data).to.not.have.property('password_hash');console.log('ğŸ‘¤ Utilisateur:',jsonData.data.id);}});"]}}]
				},
				{
					"name": "ğŸ‘¤ DÃ©tails utilisateur - Non trouvÃ©",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/99999", "host": ["{{baseUrl}}"], "path": ["api", "users", "99999"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ‘¤ Utilisateur non trouvÃ©\", function(){if(pm.response.code===404){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;pm.expect(jsonData.code).to.equal('NOT_FOUND');console.log('ğŸ‘¤ Utilisateur non trouvÃ©');}});"]}}]
				},
				{
					"name": "ğŸ“§ Recherche par email - SuccÃ¨s",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/email/{{validTestEmail}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "email", "{{validTestEmail}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ“§ Recherche par email rÃ©ussie\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('email');console.log('ğŸ“§ Utilisateur trouvÃ© par email');}});"]}}]
				},
				{
					"name": "ğŸ‘¤ Recherche par username - SuccÃ¨s",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/username/{{validTestUsername}}", "host": ["{{baseUrl}}"], "path": ["api", "users", "username", "{{validTestUsername}}"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸ‘¤ Recherche par username rÃ©ussie\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('username');console.log('ğŸ‘¤ Utilisateur trouvÃ© par username');}});"]}}]
				},
				{
					"name": "âœ… VÃ©rifier existence utilisateur - Existe",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/{{testUserId}}/exists", "host": ["{{baseUrl}}"], "path": ["api", "users", "{{testUserId}}", "exists"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âœ… Utilisateur existe\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.exists).to.be.true;console.log('âœ… Utilisateur existe');}});"]}}]
				},
				{
					"name": "âŒ VÃ©rifier existence utilisateur - N'existe pas",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}],
						"url": {"raw": "{{baseUrl}}/api/users/99999/exists", "host": ["{{baseUrl}}"], "path": ["api", "users", "99999", "exists"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Utilisateur n'existe pas\", function(){if(pm.response.code===200){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.exists).to.be.false;console.log('âŒ Utilisateur n\\'existe pas');}});"]}}]
				}
			]
		},
		{
			"name": "â• CRÃ‰ATION UTILISATEURS",
			"item": [
				{
					"name": "âœ… CrÃ©ation valide - ComplÃ¨te",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"{{uniqueUsername}}\", \"email\": \"{{uniqueEmail}}\", \"password\": \"Password123!\", \"role\": \"user\", \"status\": \"active\", \"personId\": null}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [
						{"listen": "prerequest", "script": {"exec": ["const timestamp=Date.now();pm.globals.set('uniqueUsername',`testuser${timestamp}`);pm.globals.set('uniqueEmail',`test${timestamp}@example.com`);console.log('ğŸ”§ DonnÃ©es uniques gÃ©nÃ©rÃ©es');"]}},
						{"listen": "test", "script": {"exec": ["pm.test(\"âœ… Utilisateur crÃ©Ã© avec succÃ¨s\", function(){if(pm.response.code===201){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data).to.have.property('id');pm.expect(jsonData.data).to.not.have.property('password_hash');pm.globals.set('createdUserId',jsonData.data.id);pm.globals.set('createdUserEmail',jsonData.data.email);console.log('âœ… Utilisateur crÃ©Ã©:',jsonData.data.id);}});"]}}
					]
				},
				{
					"name": "âœ… CrÃ©ation valide - Minimale",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"{{uniqueUsername2}}\", \"email\": \"{{uniqueEmail2}}\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [
						{"listen": "prerequest", "script": {"exec": ["const timestamp=Date.now();pm.globals.set('uniqueUsername2',`testuser${timestamp}`);pm.globals.set('uniqueEmail2',`test${timestamp}@example.com`);"]}},
						{"listen": "test", "script": {"exec": ["pm.test(\"âœ… CrÃ©ation minimale rÃ©ussie\", function(){if(pm.response.code===201){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.true;pm.expect(jsonData.data.role).to.equal('user');pm.expect(jsonData.data.status).to.equal('active');console.log('âœ… CrÃ©ation minimale rÃ©ussie');}});"]}}
					]
				},
				{
					"name": "âŒ CrÃ©ation - Username manquant",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"email\": \"test@example.com\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur username manquant\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const usernameError=jsonData.errors.find(e=>e.field==='username');pm.expect(usernameError).to.exist;console.log('âŒ Erreur username:',usernameError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Email manquant",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur email manquant\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const emailError=jsonData.errors.find(e=>e.field==='email');pm.expect(emailError).to.exist;console.log('âŒ Erreur email:',emailError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Mot de passe manquant",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"email\": \"test@example.com\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur mot de passe manquant\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const passwordError=jsonData.errors.find(e=>e.field==='password');pm.expect(passwordError).to.exist;console.log('âŒ Erreur mot de passe:',passwordError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Email invalide",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"email\": \"email-invalide\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur email invalide\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const emailError=jsonData.errors.find(e=>e.field==='email');pm.expect(emailError).to.exist;console.log('âŒ Erreur email:',emailError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Username trop court",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"ab\", \"email\": \"test@example.com\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur username trop court\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const usernameError=jsonData.errors.find(e=>e.field==='username');pm.expect(usernameError).to.exist;console.log('âŒ Erreur username:',usernameError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Mot de passe faible",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"email\": \"test@example.com\", \"password\": \"123\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur mot de passe faible\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const passwordError=jsonData.errors.find(e=>e.field==='password');pm.expect(passwordError).to.exist;console.log('âŒ Erreur mot de passe:',passwordError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - RÃ´le invalide",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"email\": \"test@example.com\", \"password\": \"Password123!\", \"role\": \"invalid-role\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur rÃ´le invalide\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const roleError=jsonData.errors.find(e=>e.field==='role');pm.expect(roleError).to.exist;console.log('âŒ Erreur rÃ´le:',roleError.message);}}}});"]}}]
				},
				{
					"name": "âŒ CrÃ©ation - Statut invalide",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"testuser\", \"email\": \"test@example.com\", \"password\": \"Password123!\", \"status\": \"invalid-status\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"âŒ Erreur statut invalide\", function(){if(pm.response.code===400){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;if(jsonData.errors){const statusError=jsonData.errors.find(e=>e.field==='status');pm.expect(statusError).to.exist;console.log('âŒ Erreur statut:',statusError.message);}}}});"]}}]
				},
				{
					"name": "ğŸš« CrÃ©ation - Email dÃ©jÃ  utilisÃ©",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"duplicateuser\", \"email\": \"{{createdUserEmail}}\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸš« Conflit d'email\", function(){if(pm.response.code===409){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;pm.expect(jsonData.field).to.equal('email');console.log('ğŸš« Email dÃ©jÃ  utilisÃ©');}});"]}}]
				},
				{
					"name": "ğŸš« CrÃ©ation - Username dÃ©jÃ  utilisÃ©",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{authToken}}"}, {"key": "Content-Type", "value": "application/json"}],
						"body": {"mode": "raw", "raw": "{\"username\": \"{{validTestUsername}}\", \"email\": \"new@example.com\", \"password\": \"Password123!\"}"},
						"url": {"raw": "{{baseUrl}}/api/users", "host": ["{{baseUrl}}"], "path": ["api", "users"]}
					},
					"event": [{"listen": "test", "script": {"exec": ["pm.test(\"ğŸš« Conflit de username\", function(){if(pm.response.code===409){const jsonData=pm.response.json();pm.expect(jsonData.success).to.be.false;pm.expect(jsonData.field).to.equal('username');console.log('ğŸš« Username dÃ©jÃ  utilisÃ©');}});"]}}]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"exec": [
					"console.log('=== Test Users Module Complete ===');",
					"console.log('URL:', pm.request.url);",
					"console.log('MÃ©thode:', pm.request.method);",
					"if (!pm.globals.get('testCounter')) { pm.globals.set('testCounter', 1); } else { pm.globals.set('testCounter', pm.globals.get('testCounter') + 1); }",
					"pm.globals.setIfUndefined('validTestEmail', 'test@example.com');",
					"pm.globals.setIfUndefined('validTestPassword', 'Password123!');",
					"pm.globals.setIfUndefined('validTestUsername', 'testuser');",
					"pm.globals.setIfUndefined('availableEmail', 'available@example.com');",
					"pm.globals.setIfUndefined('existingEmail', 'test@example.com');",
					"pm.globals.setIfUndefined('availableUsername', 'availableuser');",
					"pm.globals.setIfUndefined('existingUsername', 'testuser');",
					"pm.globals.setIfUndefined('baseUrl', 'http://localhost:3000');"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"exec": [
					"pm.test(\"ğŸ“Š Response time acceptable\", function () { pm.expect(pm.response.responseTime).to.be.below(2000); });",
					"pm.test(\"ğŸ“ Response has correct structure\", function () { const jsonData = pm.response.json(); pm.expect(jsonData).to.have.property('success'); pm.expect(jsonData).to.have.property('message'); pm.expect(jsonData).to.have.property('timestamp'); });",
					"pm.test(\"ğŸ” Log response details\", function () { const jsonData = pm.response.json(); console.log('Response:', JSON.stringify(jsonData, null, 2)); });"
				]
			}
		}
	]
}
