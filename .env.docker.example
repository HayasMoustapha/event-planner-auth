# ==========================================
# EVENT PLANNER AUTH - DOCKER CONFIGURATION
# ==========================================
# Copiez ce fichier en .env et adaptez les valeurs
# NE JAMAIS COMMITTER .env AVEC DES SECRETS

# ==========================================
# CONFIGURATION SERVEUR
# ==========================================
NODE_ENV=production
PORT=3000

# ==========================================
# CONFIGURATION BASE DE DONNÉES POSTGRESQL
# ==========================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=event_planner_auth
DB_USER=postgres
DB_PASSWORD=CHANGEZ_CE_MOT_DE_PASSE_SECURE
DB_SSL=false

# Bootstrap automatique (garder true pour Docker)
DB_AUTO_BOOTSTRAP=true

# ==========================================
# CONFIGURATION JWT (SÉCURITÉ CRITIQUE)
# ==========================================
# GÉNÉREZ UNE CLÉ SECURISÉE DE 256+ BITS:
# openssl rand -base64 32
JWT_SECRET=CHANGEZ_CECI_PAR_VOTRE_CLÉ_JWT_SECURISÉE_DE_256_BITS
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# ==========================================
# CONFIGURATION SÉCURITÉ
# ==========================================
BCRYPT_ROUNDS=12
CORS_ORIGIN=*

# ==========================================
# CONFIGURATION REDIS
# ==========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGEZ_CE_MOT_DE_PASSE_REDIS
REDIS_DB=0

# ==========================================
# CONFIGURATION OTP
# ==========================================
OTP_LENGTH=6
OTP_EXPIRES_IN=300

# ==========================================
# CONFIGURATION LOGGING
# ==========================================
LOG_LEVEL=info
LOG_FILE_PATH=logs

# ==========================================
# CONFIGURATION MONITORING
# ==========================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ==========================================
# CONFIGURATION RATE LIMITING
# ==========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# ==========================================
# SERVICES EXTERNES (OPTIONNEL)
# ==========================================
# Service Email (SMTP)
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=

# Service SMS (Twilio)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ==========================================
# CONFIGURATION OAUTH (OPTIONNEL)
# ==========================================
# Google Sign-In
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Apple Sign-In
APPLE_CLIENT_ID=
APPLE_TEAM_ID=
APPLE_KEY_ID=
APPLE_PRIVATE_KEY=""

# ==========================================
# SÉCURITÉ OAUTH
# ==========================================
OAUTH_TOKEN_EXPIRES_IN=10m
OAUTH_STATE_EXPIRES_IN=5m
OAUTH_NONCE_EXPIRES_IN=5m

# ==========================================
# INSTRUCTIONS DE SÉCURITÉ
# ==========================================
# 1. Changez TOUS les mots de passe marqués CHANGEZ_
# 2. Générez une clé JWT forte avec: openssl rand -base64 32
# 3. Ne commitez JAMAIS ce fichier avec des vrais secrets
# 4. Utilisez Docker secrets en production si possible
# 5. Limitez l'accès au fichier .env (chmod 600)

# ==========================================
# COMMANDES UTILES
# ==========================================
# Générer clé JWT:
# openssl rand -base64 32
#
# Démarrer le stack:
# docker-compose up -d
#
# Voir les logs:
# docker-compose logs -f auth-service
#
# Arrêter le stack:
# docker-compose down
#
# Nettoyer tout (y compris volumes):
# docker-compose down -v
